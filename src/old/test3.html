<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .tab-container {
            display: flex;
            border-bottom: 2px solid #ccc;
            margin-bottom: 10px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f4f4f4;
            border: 1px solid #ccc;
            border-bottom: none;
            margin-right: 5px;
        }
        .tab.active {
            background-color: #fff;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        table {
            align-content: center;
            width: 80%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f4f4f4;
        }
        .criterion-name {
            text-align: left;
        }
        .delete-btn {
            color: red;
            cursor: pointer;
            padding: 5px;
            margin-top: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
        }
        #productGraph {
            margin-top: 30px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

<h2>Tabs</h2>
<p>Klicke auf die Buttons, um die Inhalte der Produkte anzuzeigen:</p>

<div class="tab">
    <button class="tablinks" onclick="openCity(event, 'Product1')">Product 1</button>
    <button class="tablinks" onclick="openCity(event, 'Product2')">Product 2</button>
    <button class="tablinks" onclick="openCity(event, 'Product3')">Product 3</button>
</div>

<div id="Product1" class="tabcontent"></div>
<div id="Product2" class="tabcontent"></div>
<div id="Product3" class="tabcontent"></div>

<!-- Button und Canvas für die Grafik -->
<button onclick="drawGraph()">Zeige Diagramm</button>
<canvas id="productGraph"></canvas>

<script>
    let productCount = 3; // Anzahl der Produkte
    const criteria = [
        "Kundennutzen", "Kundenakzeptanz", "Innovativität", "Technische Qualität",
        "Zubehör, Optionen", "Dokumentation", "Serviceleistungen", "Marktpreis",
        "Händlerrabatte", "Flächendeckung", "Qualität Vertrieb", "Motivation Vertrieb",
        "Abnehmerbindung", "Lieferzeit", "Liefertreue", "Bekanntheitsgrad",
        "Produktimage", "Werbemaßnahmen", "Verkaufsförderung", "Pressearbeit",
        "Erzielte Umsätze", "Erzielte Gewinne", "Interner Stellenwert",
        "Beschaffungssituation", "F&E Kompetenz", "Produktteam"
    ]; // Beispielkriterien

    function createTabContent(productId) {
        const tabContent = document.getElementById(productId);
        tabContent.innerHTML = `
        <table>
            <thead>
                <tr>
                    <th>Kriterium</th>
                    <th>-3</th>
                    <th>-2</th>
                    <th>-1</th>
                    <th>0</th>
                    <th>+1</th>
                    <th>+2</th>
                    <th>+3</th>
                </tr>
            </thead>
            <tbody id="criteriaTableBody-${productId}">
                <!-- Dynamische Zeilen für die Kriterien -->
            </tbody>
        </table>
        <button class="delete-btn" onclick="deleteProduct('${productId}')">Produkt löschen</button>
        `;

        const tableBody = document.getElementById(`criteriaTableBody-${productId}`);
        criteria.forEach((criterion, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td class="criterion-name">${criterion}</td>
                <td><input type="radio" name="rating-${productId}-${index}" value="-3"></td>
                <td><input type="radio" name="rating-${productId}-${index}" value="-2"></td>
                <td><input type="radio" name="rating-${productId}-${index}" value="-1"></td>
                <td><input type="radio" name="rating-${productId}-${index}" value="0"></td>
                <td><input type="radio" name="rating-${productId}-${index}" value="1"></td>
                <td><input type="radio" name="rating-${productId}-${index}" value="2"></td>
                <td><input type="radio" name="rating-${productId}-${index}" value="3"></td>
            `;
            tableBody.appendChild(row);
        });
    }

    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // Initialisiere Inhalte für alle Produkte
    createTabContent("Product1");
    createTabContent("Product2");
    createTabContent("Product3");

    function deleteProduct(productId) {
        document.getElementById(productId).innerHTML = "<p>Dieses Produkt wurde gelöscht.</p>";
    }

    // Exportiere alle Daten zu CSV
    function drawGraph() {
            const criteria = ["kundennutzen", "kundenakzeptanz", "innovativität", "Technische Qualität", "Zubehör & Optionen", "Dokumentation",
                "Serviceleistungen", "Marktpreis", "Händlerrabatte", "Flächendeckung", "Qualität Vertrieb", "Motivation Vertrieb", "Abnehmerbindung",
                "Lieferzeit", "Liefertreue", "Bekanntheitsgrad", "Produktimage", "Werbemaßnahmen", "Verkaufsförderung", "Pressearbeit", "Erzielte Umsätze",
                "Erzielte Gewinne", "Interner Stellenwert", "Beschaffungssituation", "F&E Kompetenz", "Produktteam"]

            // Sammeln der ausgewählten Werte für jedes Kriterium
            const values = criteria.map(name => {
                const selected = document.querySelector(`input[name="${name}"]:checked`);
                return selected ? parseInt(selected.value) : null;
            });

            const canvas = document.getElementById('productGraph');
            const ctx = canvas.getContext('2d');
            canvas.width = 2200;  // Breite des Canvas verdoppelt
            canvas.height = 1300;  // Höhe des Canvas verdoppelt
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "black";
            ctx.strokeStyle = "black";
            ctx.lineWidth = 3;

            // Größe und Abstände für das Diagramm berechnen
            const width = canvas.width;
            const height = canvas.height;
            const padding = 100;  // Vergrößerter Abstand, damit Platz für die Beschriftungen bleibt
            const xStep = (width - padding * 2) / (criteria.length - 1);
            const yStep = (height/1.5 - padding * 2) / 6; // für die Skala -3 bis +3

            // Y-Achse zeichnen
            ctx.beginPath();
            ctx.moveTo(padding, 1 + padding);
            ctx.lineTo(padding, height-(height/3) - padding);
            ctx.stroke();

            // X-Achse zeichnen
            ctx.beginPath();
            ctx.moveTo(padding, height / 3);
            ctx.lineTo(width - padding + 200, height / 3);
            ctx.stroke();

            // Y-Skala und -Labels von -3 bis +3
            ctx.font = "60px Arial";
            ctx.textAlign = "right";
            for (let i = -3; i <= 3; i++) {
                const y = height / 3 - i * yStep;
                ctx.beginPath();
                ctx.moveTo(padding - 15, y);
                ctx.lineTo(padding + 2200, y);
                ctx.stroke();
                ctx.fillText(i, padding - 30, y + 5);
            }

            // Vertikale Linien für jedes Kriterium hinzufügen
            ctx.setLineDash([5, 5]); // Gepunktete Linien

            criteria.forEach((_, index) => {
                const x = 200 + index * xStep;

                ctx.beginPath();
                ctx.moveTo(x, padding);         // Startpunkt für die Linie (an der X-Achse)
                ctx.lineTo(x, height - 432 - padding);    // Endpunkt für die Linie (unten am Canvas)
                ctx.stroke();
            });

            // Blaue Linie mit 8px Dicke zeichnen
            ctx.setLineDash([5, 0])
            ctx.beginPath();
            ctx.lineWidth = 8;
            ctx.strokeStyle = "blue";
            values.forEach((val, index) => {
                if (val !== null) {
                    const x = 200 + index * xStep;
                    const y = height / 3 - val * yStep;

                    if (index === 0 || values[index - 1] === null) {
                        ctx.moveTo(x, y);  // Beginn der Linie
                    } else {
                        ctx.lineTo(x, y);  // Linie fortsetzen
                    }
                }
            });
            ctx.stroke();

            // Labels für die Kriterien (gedrehter Text)
            ctx.save();
            ctx.textAlign = "right";
            ctx.font = "50px Arial";
            for (const criterion of criteria) {
                const index = criteria.indexOf(criterion);
                const x = 200 + index * xStep;
                const y = height - padding - 390;

                ctx.translate(x, y);
                ctx.rotate(-Math.PI / 3); // Text um 45 Grad drehen
                ctx.fillText(criterion, 0, 0);
                ctx.rotate(Math.PI / 3);
                ctx.translate(-x, -y);
            }
            ctx.restore();
    }
</script>

</body>
</html>
